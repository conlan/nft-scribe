(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,n){e.exports=n(65)},49:function(e,t,n){},52:function(e,t){},65:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(22),i=n(14),l=n(2),c=n(34),s=n(16),u=n(69),d=(n(49),n(36)),p=n(38),m="https://mainnet.infura.io/v3/84842078b09946638c03157f83405213",f="https://rinkeby.infura.io/v3/84842078b09946638c03157f83405213",b=new d.a({supportedChainIds:[1,3,4,5,42,137]});new p.a({urls:{1:m,4:f},defaultChainId:1,pollingInterval:8e3});var h=n(50),g=[{inputs:[{internalType:"address",name:"dictator",type:"address",indexed:!1},{internalType:"address",name:"tokenAddress",type:"address",indexed:!1},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"text",type:"string"}],type:"event",anonymous:!1,name:"Record"},{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"string",name:"_text",type:"string"}],name:"dictate",type:"function",constant:!1,outputs:[],payable:!1,stateMutability:"nonpayable"},{inputs:[{internalType:"bytes",name:"",type:"bytes"},{internalType:"uint256",name:"",type:"uint256"}],name:"documents",type:"function",constant:!0,outputs:[{internalType:"address",name:"dictator",type:"address"},{internalType:"string",name:"text",type:"string"},{internalType:"uint256",name:"creationTime",type:"uint256"}],payable:!1,stateMutability:"view"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"documentsCount",type:"function",constant:!0,outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view"},{constant:!0,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getDocumentKey",outputs:[{internalType:"bytes",name:"",type:"bytes"}],payable:!1,stateMutability:"pure",type:"function"}],y=[{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],v=[{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],E="",w=0,k=!1,C=!1,x=0,T=1,N=2,A=3;function I(e){var t=new u.a(e);return t.pollingInterval=8e3,t}function _(){return l.createElement(s.a,{getLibrary:I},l.createElement(j,null))}function j(e){var t=Object(s.b)(),n=t.connector,a=t.library,c=t.chainId,u=t.account,d=t.activate,p=l.useState([]),m=Object(i.a)(p,2),f=m[0],I=m[1],_=l.useState(x),j=Object(i.a)(_,2),O=j[0],S=j[1];function F(){var e=document.getElementById("dictation").value.trim();return 0===e.length?null:e}function L(){return 1===c?"0xC207efACb12a126D382fA28460BB815F336D845f":3===c?"0x9831151655180132E6131AB35A82a5e32C149116":5===c?"0x284Dc68Afe4b30793acb7507a0Ae029d91bf698e":137===c?"0x1224110880FC42b49Ae08AA4E8B753337b356f4F":""}function D(e){return 1===e?"Mainnet - Ethereum":5===e?"Testnet - Goerli":137===e?"Mainnet - Polygon":"..."}function M(e){var t=parseInt(e);return isNaN(t)||t<0?null:e}function B(){return M(document.getElementById("tokenId").value.trim())}function R(e){try{return h.utils.getAddress(e)}catch(t){return null}}function P(){return R(document.getElementById("tokenAddress").value)}function U(e){return q.apply(this,arguments)}function q(){return(q=Object(o.a)(r.a.mark((function e(t){var n,o,i,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=F())){e.next=4;break}return window.alert("Please provide a dictation."),e.abrupt("return");case 4:return console.log("Submitting dictation..."),o=new h.utils.Interface(g),i=o.functions.dictate.encode([E,w,n]),l={to:L(),data:i},t>0&&(l.gasPrice=h.utils.bigNumberify(1e9*t)),c=a.getSigner(u),e.prev=10,e.next=13,c.sendTransaction(l).then((function(e){z(e)}));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),S(N),window.alert(e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,15]])})))).apply(this,arguments)}function z(e){return G.apply(this,arguments)}function G(){return(G=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X(),e.next=3,n.waitForTransaction(t.hash);case 3:S(T),ee();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){var e=P(),t=null;return t=137==c?" for an ERC721 or ERC1155 contract deployed on "+D(c)+".":" for an ERC721 contract deployed on "+D(c)+".",null==e?(window.alert("Please provide a valid address"+t),!1):null!=B()||(window.alert("Please provide a valid tokenID"+t),!1)}function W(e){return null===e.image_preview_url?"":e.image_preview_url}function J(e){se({url:"",title:""});var t=B(),n=P();137==c?function(e,t,n){var a=new h.Contract(t,y,X());a.uri(e).then((function(a){V(a,e,t,n)})).catch((function(r){a.tokenURI(e).then((function(a){V(a,e,t,n)})).catch((function(e){console.log(e)}))}))}(t,n,e):function(e,t,n){var a="https://api.opensea.io/api/v1/assets?token_ids="+e+"&asset_contract_address="+t;console.log(a),fetch(a,{crossDomain:!0,method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){var r="",o="";console.log(a),a.assets.length>0?(0!==W(a.assets[0]).length&&(r=W(a.assets[0])),o=function(e,t){return null!==e.name?e.name:null!==e.asset_contract&&null!==e.asset_contract.name?e.asset_contract.name+" #"+t:void 0}(a.assets[0],e)):(r="image-not-found.png",o="n/a"),se({url:r,title:o}),n().catch((function(e){window.alert(e),H()})),new h.Contract(t,y,X()).tokenURI(e).then((function(e){try{var t=JSON.parse(e);t.ipfs&&se({url:"https://ipfs.infura.io/ipfs/"+t.ipfs,title:o})}catch(n){}})).catch((function(e){}))})).catch((function(e){window.alert(e),H()}))}(t,n,e)}function V(e,t,n,a){console.log(t),console.log(e),console.log(typeof e),e.startsWith("https://arweave.net/")&&(e=e.replace("https://arweave.net/","https://ccskfx3osc4pyxbh6ix7m7lqq2glfzaijilcgc6usjh3zcu3vafa.arweave.net/"),console.log(e)),e.includes("https://api.opensea.io/api/v2/metadata/matic/")&&(e="https://api.opensea.io/api/v2/metadata/matic/"+n+"/"+t,console.log(e)),e.includes("{id}")&&(e=e.replace("{id}",t),console.log(e)),e.startsWith("ipfs://")&&(e=e.replace("ipfs://","https://cloudflare-ipfs.com/ipfs/"),console.log(e));try{fetch(e).then((function(e){return e.json()})).then((function(e){var t=e;console.log(t),t.image&&(t.image.startsWith("ipfs://")?(t.image=t.image.replace("ipfs://","https://cloudflare-ipfs.com/ipfs/"),console.log(t.image)):t.image.startsWith("https://arweave.net/")&&(t.image=t.image.replace("https://arweave.net/","https://ccskfx3osc4pyxbh6ix7m7lqq2glfzaijilcgc6usjh3zcu3vafa.arweave.net/"),console.log(t.image)),se({url:t.image,title:t.name}))})),a().catch((function(e){window.alert(e),H()}))}catch(r){console.log(r)}}function X(){return 137==c?new h.providers.JsonRpcProvider("https://polygon-rpc.com"):h.getDefaultProvider(c)}function H(){se({url:"",title:""}),S(x)}function Q(){var e=B();return"https://conlan.github.io/nft-scribe/?address="+P()+"&id="+e}function Y(){K()&&(!function(e){var t=document.createElement("textarea");t.innerText=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(Q()),document.getElementById("share-button").src="copy-complete.png")}function Z(){K()&&(S(T),J(ee))}function $(e){return 5===c?"https://goerli.etherscan.io/address/"+e:137===c?"https://polygonscan.com/address/"+e:"https://etherscan.io/address/"+e}function ee(){return te.apply(this,arguments)}function te(){return(te=Object(o.a)(r.a.mark((function e(){var t,n,a,o,i,l,s,d,p,m,f,b,k,C,x;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P(),n=B(),a=X(),o=new h.Contract(L(),g,a),e.next=6,o.getDocumentKey(t,n);case 6:return i=e.sent,e.next=9,o.documentsCount(i);case 9:l=e.sent.toString(),s=[],d=0;case 12:if(!(d<l)){e.next=28;break}return e.next=15,o.documents(i,d);case 15:if(p=e.sent,137!=c){e.next=20;break}p.ensName=p.dictator,e.next=24;break;case 20:return m=h.utils.getAddress(p.dictator),e.next=23,a.lookupAddress(m);case 23:p.ensName=e.sent;case 24:s.splice(0,0,p);case 25:d++,e.next=12;break;case 28:if(E=t,w=n,I(s),f=new h.Contract(E,v,a),b=!1,k=!1,137!=c){e.next=62;break}return e.prev=35,e.t0=parseInt,e.next=39,f.balanceOf(u,w);case 39:e.t1=e.sent.toString(),C=(0,e.t0)(e.t1),b=C>0,k=!0,e.next=62;break;case 45:return e.prev=45,e.t2=e.catch(35),console.log(e.t2),e.prev=48,f=new h.Contract(E,y,a),e.t3=parseInt,e.next=53,f.balanceOf(u);case 53:e.t4=e.sent.toString(),C=(0,e.t3)(e.t4),b=C>0,k=!0,e.next=62;break;case 59:e.prev=59,e.t5=e.catch(48),console.log(e.t5);case 62:if(0!=k){e.next=73;break}return e.prev=63,e.next=66,f.ownerOf(w);case 66:x=e.sent,b=u===x,e.next=73;break;case 70:e.prev=70,e.t6=e.catch(63),console.log(e.t6);case 73:oe(b),S(N);case 75:case"end":return e.stop()}}),e,null,[[35,45],[48,59],[63,70]])})))).apply(this,arguments)}var ne=l.useState(!1),ae=Object(i.a)(ne,2),re=ae[0],oe=ae[1],ie=l.useState({url:"",title:""}),le=Object(i.a)(ie,2),ce=le[0],se=le[1],ue=l.useState(),de=Object(i.a)(ue,2),pe=de[0],me=de[1];if(l.useEffect((function(){pe&&pe===n&&me(void 0)}),[pe,n]),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.b)(),n=t.active,a=t.error,r=t.activate;Object(l.useEffect)((function(){var t=window.ethereum;if(t&&!n&&!a&&!e){var o=function(e){console.log("networkChanged",e),r(b)},i=function(e){console.log("accountsChanged",e),e.length>0&&r(b)};return t.on("networkChanged",o),t.on("accountsChanged",i),function(){t.removeListener("networkChanged",o),t.removeListener("accountsChanged",i)}}return function(){}}),[n,a,e,r])}(!function(){var e=Object(s.b)(),t=e.activate,n=e.active,a=Object(l.useState)(!1),r=Object(i.a)(a,2),o=r[0],c=r[1];return Object(l.useEffect)((function(){b.isAuthorized().then((function(e){e?t(b,void 0,!0).catch((function(){c(!0)})):c(!0)}))}),[t]),Object(l.useEffect)((function(){!o&&n&&c(!0)}),[o,n]),o}()||!!pe),!1===k){k=!0;try{if("URLSearchParams"in window){var fe=new URLSearchParams(window.location.search),be=null,he=null;if(fe.has("address")){var ge=fe.get("address");be=R(ge)}if(fe.has("id")){var ye=fe.get("id");he=M(ye)}}null!==be&&null!==he&&(console.log("found valid address + id, loading token..."),window.requestAnimationFrame((function(){document.getElementById("tokenAddress").value=be,document.getElementById("tokenId").value=he,C=!0})))}catch(ve){console.log(ve)}}return C&&L().length>0&&(C=!1,Z()),l.createElement("div",null,l.createElement("div",{className:"padded-div"},137==c?l.createElement("label",null,l.createElement("i",null,"NFT Scribe")," is a smart contract that allows ERC721 + ERC1155 owners to append onchain messages and annotations to their tokens.",l.createElement("p",null),"The longer your message the more gas it will require!"):l.createElement("label",null,l.createElement("i",null,"NFT Scribe")," is a smart contract that allows ERC721 owners to append onchain messages and annotations to their tokens.",l.createElement("p",null),"The longer your message the more gas it will require!")),l.createElement("hr",null),l.createElement("div",{className:"center-header-images-container"},l.createElement("div",{className:"inner-header-images"},l.createElement("img",{className:"hero-image",src:"scribe-holiday.gif",alt:"Scribe"}),0===ce.url.length&&l.createElement("img",{className:"nft-outline",alt:"Outline",src:"nft_outline.png"}),0!==ce.url.length&&l.createElement("img",{alt:"Token",className:"nft-overlay",src:ce.url}),0!==ce.title.length&&l.createElement("label",{className:"nft-overlay"},ce.title),(O===T||O===A)&&l.createElement("img",{alt:"Spinner",className:"loading-spinner",src:"loading.gif"}),O===N&&l.createElement("img",{alt:"Copy",id:"share-button",className:"share-button",src:"copy.png",onClick:function(){Y()}}),O===N&&l.createElement("img",{alt:"Copy",className:"tweet-button",src:"tweet.png",onClick:function(){!function(){if(K()){var e=Q(),t=ce.title;t.length>50&&(t=t.substring(0,50)+"...");var n=(o=(o=P()).toLowerCase())==="0xb932a70A57673d89f4acfFBE830E8ed7f75Fb9e0".toLowerCase()||o==="0x41A322b28D0fF354040e2CbC676F0320d8c8850d".toLowerCase()?"SuperRare_co":o==="0x1d963688FE2209A98dB35C67A041524822Cf04ff".toLowerCase()?"marble_cards":o==="0x2a46f2ffd99e19a89476e2f62270e0a35bbf0756".toLowerCase()?"makersplaceco":o==="0xfbeef911dc5821886e1dda71586d90ed28174b7d".toLowerCase()?"KnownOrigin_io":o==="0x06012c8cf97BEaD5deAe237070F9587f8E7A266d".toLowerCase()?"CryptoKitties":o==="0x6aD0f855c97eb80665F2D0C7d8204895e052C373".toLowerCase()||o==="0x6aD0f855c97eb80665F2D0C7d8204895e052C373".toLowerCase()?"wildcards_world":o==="0x102C527714AB7e652630cAc7a30Abb482B041Fd0".toLowerCase()?"CryptoKaijuIO":o==="0x6EbeAf8e8E946F0716E6533A6f2cefc83f60e8Ab".toLowerCase()?"GodsUnchained":o==="0x79986aF15539de2db9A5086382daEdA917A9CF0C".toLowerCase()?"Cryptovoxels":null,a='See scribed messages for "'+t+'" ';null!==n&&(a+="(@"+n+") ");var r="https://twitter.com/intent/tweet?text="+(a=(a+="at "+(e=e.replace("&","%26"))).replace("#",""))+"&hashtags=NFT";window.open(r)}var o}()}}))),l.createElement("br",null),l.createElement("div",null,l.createElement("div",{className:"main-section"},l.createElement("label",null,l.createElement("b",null,"Token Address")),l.createElement("input",{id:"tokenAddress",placeholder:"0x..."}),l.createElement("label",null,l.createElement("b",null,"Token ID")),l.createElement("input",{id:"tokenId",type:"number",placeholder:"0, 1, 2, 3...",min:"0",defaultValue:"0"}),l.createElement("div",{className:"button-container"},!(!a||!u)&&l.createElement("button",{disabled:O===T,className:"load-erc",onClick:function(){Z()}},l.createElement("b",null,"Load ERC721")),!1===!!a&&l.createElement("button",{className:"connect-web3",onClick:function(){me(b),d(b)}},"Connect to Web3")),O!==x&&O!==T&&re&&l.createElement("div",null,l.createElement("label",null,l.createElement("b",null,"Dictation")),l.createElement("input",{disabled:O===A,id:"dictation",placeholder:"Let it be known..."}),l.createElement("div",{className:"button-container"},l.createElement("button",{disabled:O===A,className:"submit-dictation",onClick:function(){var e;(null!==F()||(window.alert("Please provide a dictation."),0))&&(S(A),e=U,137==c?e(0):fetch("https://ethgasstation.info/json/ethgasAPI.json").then((function(e){return e.json()})).then((function(t){var n=t.fast;void 0===n?n=10:n/=10,e(n)})))}},l.createElement("b",null,"Submit Dictation")))),(O===N||O===A)&&function(){var e=[];return f.forEach((function(t){var n,a=function(e){var t=(new Date).getTime()/1e3,n=Math.floor(t-e),a=Math.floor(n/60),r=Math.floor(a/60),o=Math.floor(r/24);return o>0?1===o?o+" day ago":o+" days ago":r>0?1===r?r+" hour ago":r+" hours ago":a>0?a+" min ago":n>0?1===n?n+" second ago":n+" seconds ago":"just recently"}(t.creationTime),r=t.text,o=(D(c),$(t.dictator));if(null===t.ensName){var i=((n=t.dictator).length>20&&(n=n.substring(0,10)+"..."+n.substring(n.length-10,n.length)),n);e.push(l.createElement("div",{className:"record-line",key:r+t.creationTime.toString()},l.createElement("label",{className:"record-line"},l.createElement("b",null,l.createElement("a",{href:o,rel:"noopener noreferrer",target:"_blank"},i)),l.createElement("span",{className:"timestamp"}," \u2022 (",a,")"),l.createElement("br",null),l.createElement("br",null),r)))}else e.push(l.createElement("div",{className:"record-line",key:t.creationTime.toString()},l.createElement("label",{className:"record-line"},l.createElement("b",null,l.createElement("a",{href:o,rel:"noopener noreferrer",target:"_blank"},t.ensName)),l.createElement("span",{className:"timestamp"}," \u2022 (",a,")"),l.createElement("br",null),l.createElement("br",null),r)))})),0===e.length&&e.push(l.createElement("label",{key:"0"},"No records found for this token.")),e}())),l.createElement("hr",null),l.createElement("div",{className:"padded-div"},l.createElement("label",null,"Version ","1.1.2"," | ",l.createElement("b",null,l.createElement("a",{href:"https://github.com/conlan/nft-scribe",target:"_blank",rel:"noopener noreferrer"},"Github"))," | ",l.createElement("b",null,l.createElement("a",{href:$(L()),target:"_blank",rel:"noopener noreferrer"},"Contract"))," | ",l.createElement("b",null,l.createElement("a",{href:"https://twitter.com/conlan",target:"_blank",rel:"noopener noreferrer"},"@Conlan"))," | ",l.createElement("b",null,l.createElement("a",{href:"https://www.cryptovoxels.com/play?coords=S@279E,418N",target:"_blank",rel:"noopener noreferrer"},"Cryptovoxels"))," | "),l.createElement("label",null,"\u26d3",D(c)),l.createElement("br",null),l.createElement("label",null,"Please use at your own risk and double check ",l.createElement("a",{href:"https://ethgasstation.info/",target:"_blank",rel:"noopener noreferrer"},"gas price")," before submitting transaction \u26fd"),l.createElement("br",null),l.createElement("label",null,"Image and name metadata powered by ",l.createElement("a",{href:"https://opensea.io/",target:"_blank",rel:"noopener noreferrer"},"OpenSea")),l.createElement("br",null),l.createElement("label",null,l.createElement("a",{href:"https://giphy.com/stickers/geometric-heysp-illustrated-geometry-c6XT7hN1iSuUoNxD1b",target:"_blank",rel:"noopener noreferrer"},"Loading GIF Source"))))}c.render(l.createElement(_,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.56da10ee.chunk.js.map